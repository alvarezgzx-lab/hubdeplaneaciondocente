<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hub de Planeación Docente 2025-2026 | La Salle</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Montserrat:wght@400;500;700;800;900&family=Oswald:wght@500;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        h1, h2, h3, .font-heading { font-family: 'Montserrat', sans-serif; }
        .font-ods { font-family: 'Oswald', sans-serif; }
        
        /* Ocultar elementos de impresión en pantalla normal */
        .print-only { display: none; }

        /* IMPRESIÓN INTELIGENTE */
        @media print {
            .no-print { display: none !important; }
            .print-only { display: block !important; }
            body { background: white; color: black; font-size: 10pt; }
            
            /* Asegurar saltos de página limpios para la impresión masiva */
            .page-break { page-break-before: always; }
            
            table { width: 100%; border-collapse: collapse; page-break-inside: auto; }
            tr { page-break-inside: avoid; page-break-after: auto; }
            th, td { border: 1px solid black; padding: 5px; text-align: left; }
            th { background-color: #f3f4f6 !important; -webkit-print-color-adjust: exact; font-weight: bold; text-align: center; }
            .section-header { background-color: black !important; color: white !important; -webkit-print-color-adjust: exact; font-weight: bold; text-transform: uppercase; padding: 4px; margin-top: 10px; font-size: 9pt; }
            
            /* Ajustes para ODS en impresión */
            .ods-print-container { display: flex; gap: 10px; flex-wrap: wrap; }
            .ods-print-item { border: 1px solid #ccc; padding: 5px; font-size: 8pt; width: 45%; }
        }

        /* Animaciones suaves */
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- ICONOS SVG ---
        const IconBase = ({ d, className, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>
                {d}
            </svg>
        );

        const Printer = (props) => <IconBase {...props} d={<><polyline points="6 9 6 2 18 2 18 9"></polyline><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path><rect x="6" y="14" width="12" height="8"></rect></>} />;
        const LayoutDashboard = (props) => <IconBase {...props} d={<><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></>} />;
        const ChevronDown = (props) => <IconBase {...props} d={<polyline points="6 9 12 15 18 9"></polyline>} />;
        const ChevronRight = (props) => <IconBase {...props} d={<polyline points="9 18 15 12 9 6"></polyline>} />;
        const ArrowLeft = (props) => <IconBase {...props} d={<><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></>} />;
        const HeartHandshake = (props) => <IconBase {...props} d={<><path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"></path><path d="M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.15-.26c.92.45 1.56 1.25 2.22 2.09"></path><path d="M12 5l2.96 2.96a2.17 2.17 0 0 1 0 3.08v0c-.82.82-2.13.85-3 .07l-2.07-1.9a2.82 2.82 0 0 0-3.15-.26c-.92.45-1.56 1.25-2.22 2.09"></path></>} />;
        const BookOpen = (props) => <IconBase {...props} d={<><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></>} />;
        const Users = (props) => <IconBase {...props} d={<><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></>} />;
        const Info = (props) => <IconBase {...props} d={<><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></>} />;
        const CheckCircle = (props) => <IconBase {...props} d={<><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></>} />;
        const FileText = (props) => <IconBase {...props} d={<><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></>} />;
        const ClipboardList = (props) => <IconBase {...props} d={<><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><path d="M12 11h4"></path><path d="M12 16h4"></path><path d="M8 11h.01"></path><path d="M8 16h.01"></path></>} />;
        const Scale = (props) => <IconBase {...props} d={<><path d="m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"/><path d="m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z"/><path d="M7 21h10"/><path d="M12 3v18"/><path d="M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2"/></>} />;
        const Shield = (props) => <IconBase {...props} d={<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>} />;
        const X = (props) => <IconBase {...props} d={<><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></>} />;
        const FolderOpen = (props) => <IconBase {...props} d={<path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>} />;

        // --- COMPONENTE DE FORMATO DE IMPRESIÓN (REUTILIZABLE) ---
        const PrintableFormat = ({ data }) => (
            <div className="bg-white p-8 text-black font-serif text-[10.5pt] mb-8">
                <div className="flex justify-between items-center border-b-2 border-black pb-4 mb-4">
                  <div className="w-16 h-16 border-2 border-black flex items-center justify-center rounded-lg">
                     <span className="font-bold text-2xl">LSC</span>
                  </div>
                  <div className="text-center flex-1 mx-4">
                    <h1 className="text-base font-black uppercase tracking-tight leading-none mb-1">Colegio Regiomontano Contry La Salle</h1>
                    <p className="text-[9pt] uppercase font-sans font-bold">Planeación Didáctica - Ciclo Escolar 2025-2026</p>
                    <p className="text-[8pt] italic mt-1">{data.subject} | {data.grado} | Trimestre {data.trimestre}</p>
                  </div>
                  <div className="text-right text-[8pt] font-sans leading-tight">
                    UNESCO RedPEA<br/>Escuela Asociada
                  </div>
                </div>

                <div className="section-header">I. Encuadre Curricular</div>
                <table className="w-full border-collapse mb-4">
                  <tbody>
                    <tr>
                      <th className="border border-black p-2 bg-gray-100 text-left font-sans text-[8pt] uppercase w-1/4">Proyecto</th>
                      <td className="border border-black p-2 font-bold" colSpan="3">{data.title}</td>
                    </tr>
                    <tr>
                      <th className="border border-black p-2 bg-gray-100 text-left font-sans text-[8pt] uppercase">PDA</th>
                      <td className="border border-black p-2 italic" colSpan="3">{data.pda}</td>
                    </tr>
                    <tr>
                      <th className="border border-black p-2 bg-gray-100 text-left font-sans text-[8pt] uppercase">Metodología</th>
                      <td className="border border-black p-2">{data.metodología}</td>
                      <th className="border border-black p-2 bg-gray-100 text-left font-sans text-[8pt] uppercase w-1/6">Sesiones</th>
                      <td className="border border-black p-2">{data.fases.reduce((acc, f) => acc + f.sesiones.length, 0)}</td>
                    </tr>
                    <tr>
                      <th className="border border-black p-2 bg-gray-100 text-left font-sans text-[8pt] uppercase">Ejes & Perfil</th>
                      <td className="border border-black p-2" colSpan="3">
                        {data.ejes.join(' • ')} <br/> {data.perfil.join(' • ')}
                      </td>
                    </tr>
                    <tr>
                      <th className="border border-black p-2 bg-gray-100 text-left font-sans text-[8pt] uppercase">Vinculación ODS</th>
                      <td className="border border-black p-2" colSpan="3">
                        <div className="ods-print-container">
                            {data.ods.map(ods => (
                                <div key={ods.id} className="ods-print-item">
                                    <strong>ODS {ods.id}: {ods.nombre}</strong><br/>
                                    <span className="italic">{ods.meta}</span>
                                </div>
                            ))}
                        </div>
                      </td>
                    </tr>
                  </tbody>
                </table>

                <div className="section-header">II. Secuencia Didáctica</div>
                <table className="w-full border-collapse mb-6 text-[9pt]">
                  <thead>
                    <tr className="bg-gray-100">
                      <th className="border border-black p-1 w-10 text-center font-sans text-[7pt] uppercase">Ses</th>
                      <th className="border border-black p-1 text-left font-sans text-[7pt] uppercase">Actividades (Inicio - Desarrollo - Cierre)</th>
                      <th className="border border-black p-1 w-1/5 text-center font-sans text-[7pt] uppercase">Evidencia</th>
                    </tr>
                  </thead>
                  <tbody>
                    {data.fases.map(fase => fase.sesiones.map(s => (
                      <tr key={s.num}>
                        <td className="border border-black p-2 text-center font-bold align-top">{s.num}</td>
                        <td className="border border-black p-2 align-top">
                          <p className="font-bold underline mb-1 uppercase text-[7pt]">{s.obj}</p>
                          <ul className="list-disc list-outside ml-4 space-y-0.5 text-[8pt]">
                             {s.actividades.map((act, i) => <li key={i}>{act}</li>)}
                          </ul>
                        </td>
                        <td className="border border-black p-2 text-[8pt] text-center align-top">
                           Registro Libreta /<br/>Evaluación Continua
                        </td>
                      </tr>
                    )))}
                  </tbody>
                </table>

                <div className="flex justify-between items-end text-center pt-4 border-t border-gray-200 text-[8pt]">
                   <div className="w-1/3"><div className="border-b border-black mb-1 w-3/4 mx-auto"></div>Docente</div>
                   <div className="w-1/3"><div className="border-b border-black mb-1 w-3/4 mx-auto"></div>Coordinación</div>
                   <div className="w-1/3"><div className="border-b border-black mb-1 w-3/4 mx-auto"></div>Dirección</div>
                </div>
            </div>
        );

        // --- COMPONENTE HOME / HERO ---
        const HomeView = ({ onSelectSubject }) => {
            return (
                <div className="min-h-screen bg-slate-50 flex flex-col items-center justify-center p-4 relative overflow-hidden no-print">
                    {/* Background decorativo */}
                    <div className="absolute top-0 left-0 w-full h-1/2 bg-[#003057] rounded-b-[4rem] z-0 shadow-2xl"></div>
                    <div className="absolute top-10 right-10 w-64 h-64 bg-[#D4AF37] rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-pulse"></div>
                    
                    <div className="relative z-10 w-full max-w-5xl text-center">
                        <div className="mb-8 flex justify-center">
                            <div className="w-24 h-24 bg-white rounded-full flex items-center justify-center shadow-lg border-4 border-[#D4AF37]">
                                <span className="text-[#003057] font-black text-3xl">LSC</span>
                            </div>
                        </div>
                        
                        <h1 className="text-white text-3xl md:text-5xl font-black uppercase tracking-tight mb-2 font-heading text-shadow">
                            Colegio Regiomontano <br/> <span className="text-[#D4AF37]">Contry La Salle</span>
                        </h1>
                        <p className="text-blue-100 text-lg md:text-xl font-medium uppercase tracking-widest mb-12">
                            Planeaciones Ciclo Escolar 2025-2026
                        </p>
                        <div className="inline-block bg-white/10 backdrop-blur-md px-8 py-3 rounded-full border border-white/20 mb-16">
                             <p className="text-white font-bold text-sm md:text-base flex items-center justify-center gap-2">
                                <Users className="w-5 h-5" /> Docente: Jesús Ángel Álvarez González
                             </p>
                        </div>

                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 w-full">
                            <SubjectButton 
                                title="ESPAÑOL II" 
                                icon={BookOpen} 
                                color="blue" 
                                onClick={() => onSelectSubject('Español II')} 
                            />
                            <SubjectButton 
                                title="FORMACIÓN CÍVICA Y ÉTICA II" 
                                icon={Scale} 
                                color="red" 
                                onClick={() => onSelectSubject('F. Cívica y Ética II')} 
                            />
                            <SubjectButton 
                                title="FORMACIÓN CÍVICA Y ÉTICA III" 
                                icon={Shield} 
                                color="emerald" 
                                onClick={() => onSelectSubject('F. Cívica y Ética III')} 
                            />
                        </div>
                    </div>
                </div>
            )
        }

        const SubjectButton = ({ title, icon: Icon, color, onClick }) => (
            <button 
                onClick={onClick}
                className={`bg-white hover:bg-gray-50 p-8 rounded-3xl shadow-xl hover:shadow-2xl transition-all transform hover:-translate-y-2 border-b-8 border-${color}-600 group flex flex-col items-center justify-center h-64`}
            >
                <div className={`bg-${color}-100 p-4 rounded-2xl mb-6 group-hover:scale-110 transition-transform`}>
                    <Icon className={`w-12 h-12 text-${color}-700`} />
                </div>
                <span className={`text-[#003057] font-black text-lg uppercase leading-tight max-w-[80%]`}>
                    {title}
                </span>
            </button>
        )

        // --- COMPONENTE PRINCIPAL (APP) ---
        const App = () => {
          const [view, setView] = useState('home'); 
          const [selectedSubject, setSelectedSubject] = useState(null);
          const [currentPdaId, setCurrentPdaId] = useState(null);
          const [activeTrimestre, setActiveTrimestre] = useState(2);
          const [showPrintModal, setShowPrintModal] = useState(false);
          const [batchPrintData, setBatchPrintData] = useState(null);
          
          // NUEVO: Estado para datos externos
          const [pdaData, setPdaData] = useState([]);
          const [loading, setLoading] = useState(true);

          // EFECTO PARA CARGAR DATOS
          useEffect(() => {
            fetch('./data.json')
              .then(response => response.json())
              .then(data => {
                setPdaData(data);
                setLoading(false);
              })
              .catch(error => {
                console.error("Error al cargar data.json:", error);
                // Fallback silencioso por si falla la carga local
                setLoading(false);
              });
          }, []);

          // Obtener datos del PDA actual
          const currentData = currentPdaId ? pdaData.find(p => p.id === currentPdaId) : null;

          // Filtrar PDAs por trimestre Y por materia seleccionada (NUEVO FILTRO)
          const filteredPDAs = useMemo(() => {
              return pdaData.filter(p => {
                  const matchTrimestre = p.trimestre === activeTrimestre;
                  const matchSubject = selectedSubject ? p.subject === selectedSubject : true;
                  return matchTrimestre && matchSubject;
              });
          }, [activeTrimestre, pdaData, selectedSubject]);

          const handleSelectSubject = (subject) => {
              setSelectedSubject(subject);
              setView('gallery');
          };

          const handleGoHome = () => {
              setView('home');
              setSelectedSubject(null);
              setCurrentPdaId(null);
              setBatchPrintData(null);
          };

          const handleBatchPrint = (trimestre) => {
             // Imprimir solo lo que corresponde a la materia seleccionada en ese trimestre
             const dataToPrint = pdaData.filter(p => 
                p.trimestre === trimestre && 
                (selectedSubject ? p.subject === selectedSubject : true)
             );
             
             if(dataToPrint.length === 0) {
                 alert("No hay planeaciones registradas para este periodo.");
                 return;
             }

             setBatchPrintData(dataToPrint);
             setShowPrintModal(false);

             setTimeout(() => {
                 window.print();
             }, 500);
          };

          const handleSinglePrint = () => window.print();

          // Render de Carga
          if (loading) {
             return (
                 <div className="min-h-screen flex items-center justify-center bg-slate-50">
                     <div className="text-center">
                        <div className="animate-spin rounded-full h-12 w-12 border-t-4 border-b-4 border-[#003057] mx-auto mb-4"></div>
                        <p className="text-[#003057] font-bold">Cargando Planeaciones...</p>
                     </div>
                 </div>
             )
          }

          // 1. Vista Home
          if (view === 'home') {
              return <HomeView onSelectSubject={handleSelectSubject} />;
          }

          // 2. Vista Detalle
          if (currentPdaId && currentData) {
             return (
                 <div className="min-h-screen bg-[#f8fafc]">
                    <div className="no-print">
                        <DetailViewHeader 
                            title={currentData.title} 
                            onBack={() => setCurrentPdaId(null)} 
                            onPrint={handleSinglePrint}
                        />
                        <DetailViewContent data={currentData} />
                    </div>
                    <div className="print-only">
                        <PrintableFormat data={currentData} />
                    </div>
                 </div>
             );
          }

          // 3. Vista Galería
          return (
            <div className="min-h-screen bg-[#f1f5f9] antialiased">
                <header className="bg-[#003057] text-white shadow-xl sticky top-0 z-50 no-print border-b-4 border-[#D4AF37]">
                    <div className="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
                        <div className="flex items-center space-x-4">
                            <button onClick={handleGoHome} className="p-2 bg-white/10 hover:bg-white/20 rounded-full transition">
                                <ArrowLeft className="w-5 h-5" />
                            </button>
                            <div>
                                <h1 className="text-lg font-black uppercase tracking-tight">{selectedSubject || 'Todas las Materias'}</h1>
                                <p className="text-[10px] text-yellow-400 font-bold uppercase">Ciclo Escolar 2025-2026</p>
                            </div>
                        </div>
                        <button 
                            onClick={() => setShowPrintModal(true)}
                            className="bg-[#D4AF37] hover:bg-yellow-600 text-[#003057] font-bold py-2 px-4 rounded-lg shadow-lg flex items-center text-xs uppercase tracking-wide transition-all"
                        >
                            <Printer className="mr-2 w-4 h-4" /> Imprimir Formatos
                        </button>
                    </div>
                </header>

                <main className="max-w-7xl mx-auto px-4 py-8 no-print fade-in">
                    <div className="flex justify-center mb-10">
                        <div className="bg-white p-1 rounded-xl shadow-sm border border-gray-200 inline-flex">
                            {[1, 2, 3].map(t => (
                                <button
                                    key={t}
                                    onClick={() => setActiveTrimestre(t)}
                                    className={`px-6 py-2 rounded-lg text-sm font-bold uppercase transition-all ${
                                        activeTrimestre === t 
                                        ? 'bg-[#003057] text-white shadow-md' 
                                        : 'text-gray-400 hover:text-gray-600'
                                    }`}
                                >
                                    Trimestre {t}
                                </button>
                            ))}
                        </div>
                    </div>

                    {filteredPDAs.length > 0 ? (
                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                            {filteredPDAs.map(pda => (
                                <PdaCard key={pda.id} data={pda} onClick={() => setCurrentPdaId(pda.id)} />
                            ))}
                        </div>
                    ) : (
                        <div className="text-center py-20 opacity-50">
                            <FolderOpen className="w-16 h-16 mx-auto mb-4 text-gray-300" />
                            <p className="text-gray-400 font-medium">No hay secuencias cargadas para este trimestre en {selectedSubject}.</p>
                        </div>
                    )}
                </main>

                {showPrintModal && (
                    <div className="fixed inset-0 bg-black/50 backdrop-blur-sm z-[100] flex items-center justify-center no-print">
                        <div className="bg-white rounded-2xl p-8 max-w-md w-full shadow-2xl animate-in zoom-in duration-200">
                            <div className="flex justify-between items-start mb-6">
                                <h3 className="text-xl font-black text-[#003057] uppercase">Impresión por Lotes</h3>
                                <button onClick={() => setShowPrintModal(false)} className="text-gray-400 hover:text-red-500"><X /></button>
                            </div>
                            <p className="text-sm text-gray-600 mb-6">Selecciona el periodo que deseas imprimir para <strong>{selectedSubject}</strong>. Se generará un PDF consolidado.</p>
                            
                            <div className="space-y-3">
                                {[1, 2, 3].map(t => (
                                    <button 
                                        key={t}
                                        onClick={() => handleBatchPrint(t)}
                                        className="w-full p-4 rounded-xl border-2 border-gray-100 hover:border-[#003057] hover:bg-blue-50 flex justify-between items-center group transition-all"
                                    >
                                        <span className="font-bold text-gray-700 group-hover:text-[#003057]">Trimestre {t}</span>
                                        <Printer className="w-5 h-5 text-gray-300 group-hover:text-[#003057]" />
                                    </button>
                                ))}
                            </div>
                        </div>
                    </div>
                )}

                <div className="print-only">
                    {batchPrintData && batchPrintData.map((pda, index) => (
                        <div key={pda.id} className={index > 0 ? "page-break" : ""}>
                            <PrintableFormat data={pda} />
                        </div>
                    ))}
                </div>
            </div>
          );
        };

        // --- SUBCOMPONENTES DE UI ---

        const PdaCard = ({ data, onClick }) => (
            <div 
                onClick={onClick}
                className={`bg-white rounded-[2rem] shadow-sm hover:shadow-xl transition-all duration-300 border border-gray-100 cursor-pointer overflow-hidden group hover:-translate-y-1`}
            >
                <div className={`h-2 w-full bg-${data.color}-500`}></div>
                <div className="p-8">
                    <div className="flex justify-between items-start mb-4">
                         <span className={`bg-${data.color}-100 text-${data.color}-700 p-3 rounded-2xl`}>
                            <FileText className="w-6 h-6" />
                         </span>
                         <span className="text-[10px] font-black text-gray-300 uppercase">PDA-{data.id.split('-').length > 1 ? data.id.split('-')[1] : '01'}</span>
                    </div>
                    <h3 className="text-lg font-black text-[#003057] mb-2 leading-tight group-hover:text-blue-600 transition-colors">
                        {data.title}
                    </h3>
                    <p className="text-xs text-gray-500 mb-6 line-clamp-2">{data.pda}</p>
                    <div className="flex gap-2">
                        <span className="bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-[9px] font-bold uppercase">{data.metodología.split(' ')[0]}</span>
                        <span className="bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-[9px] font-bold uppercase">{data.fases.reduce((acc,f)=>acc+f.sesiones.length,0)} Sesiones</span>
                    </div>
                </div>
            </div>
        );

        const DetailViewHeader = ({ title, onBack, onPrint }) => (
            <header className="bg-[#003057] text-white shadow-lg sticky top-0 z-40">
                <div className="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
                    <div className="flex items-center gap-4">
                        <button onClick={onBack} className="p-2 bg-white/10 hover:bg-white/20 rounded-full transition"><ArrowLeft className="w-5 h-5" /></button>
                        <h1 className="text-base font-bold uppercase truncate max-w-md">{title}</h1>
                    </div>
                    <button onClick={onPrint} className="bg-[#D4AF37] hover:bg-yellow-600 text-[#003057] font-bold py-2 px-6 rounded-full shadow-lg flex items-center text-xs uppercase transition-all">
                        <Printer className="mr-2 w-4 h-4" /> Imprimir
                    </button>
                </div>
            </header>
        );

        const DetailViewContent = ({ data }) => {
            const [activeFase, setActiveFase] = useState(0);
            return (
                <div className="max-w-7xl mx-auto px-4 py-8 space-y-8 fade-in">
                    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
                        <div className="lg:col-span-2 space-y-6">
                            <div className="bg-white rounded-2xl shadow-sm p-8 border border-gray-100 relative overflow-hidden">
                                <div className="absolute top-0 right-0 w-32 h-32 bg-blue-50 rounded-bl-full -mr-8 -mt-8 z-0"></div>
                                <h3 className="relative z-10 text-sm font-black text-[#003057] uppercase mb-6 flex items-center border-b border-gray-100 pb-2">
                                    <LayoutDashboard className="w-4 h-4 mr-2 text-blue-600"/> Marco Curricular NEM
                                </h3>
                                <div className="relative z-10 bg-blue-50/50 p-6 rounded-xl border-l-4 border-blue-500 mb-6">
                                    <span className="text-[10px] font-black text-blue-800 uppercase mb-2 block tracking-widest">PDA (Proceso de Desarrollo de Aprendizaje)</span>
                                    <p className="text-gray-800 font-medium leading-relaxed italic text-lg">"{data.pda}"</p>
                                </div>
                                <div className="relative z-10 grid md:grid-cols-2 gap-6">
                                    <div>
                                        <span className="text-[10px] font-bold text-gray-400 uppercase block mb-3">Metodología Didáctica</span>
                                        <div className="flex items-center text-sm font-bold text-gray-700 bg-gray-50 p-3 rounded-lg border border-gray-100">
                                            <div className="w-2 h-2 rounded-full bg-blue-500 mr-2"></div>
                                            {data.metodología}
                                        </div>
                                    </div>
                                    <div>
                                        <span className="text-[10px] font-bold text-gray-400 uppercase block mb-3">Ejes Articuladores</span>
                                        <div className="flex flex-wrap">
                                            {data.ejes.map(e => (
                                                <span key={e} className="text-xs font-medium text-gray-600 bg-gray-50 px-2 py-1 rounded border border-gray-100 mr-2 mb-1 flex items-center">
                                                    {e}
                                                </span>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div className="bg-white rounded-2xl shadow-sm p-8 border border-gray-100">
                                <h3 className="text-sm font-black text-[#003057] uppercase mb-6 flex items-center border-b border-gray-100 pb-2">
                                     <ClipboardList className="w-4 h-4 mr-2 text-blue-600"/> Gestión de Clase
                                </h3>
                                <div className="grid md:grid-cols-2 gap-8">
                                    <div>
                                        <h4 className="text-xs font-black text-gray-400 uppercase mb-2 flex items-center"><Info className="w-3 h-3 mr-1"/> Recursos y Materiales</h4>
                                        <p className="text-sm text-gray-600 leading-relaxed">{data.materiales}</p>
                                    </div>
                                    <div>
                                        <h4 className="text-xs font-black text-gray-400 uppercase mb-2 flex items-center"><CheckCircle className="w-3 h-3 mr-1"/> Evaluación</h4>
                                        <p className="text-sm text-gray-600 leading-relaxed">{data.evaluacion}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <aside className="space-y-6">
                            <div className="bg-gradient-to-br from-[#003057] to-blue-900 text-white rounded-2xl p-8 shadow-xl relative overflow-hidden h-full">
                                <div className="absolute top-0 right-0 w-40 h-40 bg-white opacity-5 rounded-full blur-2xl -mr-10 -mt-10"></div>
                                <h3 className="relative z-10 text-sm font-bold text-yellow-400 uppercase mb-6 flex items-center border-b border-white/10 pb-2">
                                    <HeartHandshake className="w-4 h-4 mr-2"/> Identidad Lasallista
                                </h3>
                                <div className="relative z-10 space-y-8">
                                    <div>
                                        <p className="text-[10px] font-bold text-blue-200 uppercase mb-2 tracking-wider">Misión & Valores</p>
                                        <p className="text-sm font-medium leading-relaxed opacity-95 text-white/90 italic">"{data.identidad}"</p>
                                    </div>
                                    <div>
                                        <p className="text-[10px] font-bold text-blue-200 uppercase mb-2 tracking-wider">Perfil de Egreso</p>
                                        <ul className="space-y-3">
                                            {data.perfil.map((p, i) => (
                                                <li key={i} className="text-xs flex items-start opacity-90 leading-snug">
                                                    <span className="text-yellow-400 mr-2 mt-0.5 text-base">★</span> {p}
                                                </li>
                                            ))}
                                        </ul>
                                    </div>
                                    <div className="pt-6 border-t border-white/10">
                                        <p className="text-[10px] font-bold text-blue-200 uppercase mb-3 tracking-wider">ODS Vinculados</p>
                                        <div className="flex flex-col gap-4">
                                            {data.ods.map(ods => (
                                                <div key={ods.id} className="bg-white/10 p-3 rounded-lg border border-white/10 hover:bg-white/20 transition-all">
                                                    <div className="flex items-center gap-3 mb-2">
                                                        <div className="w-10 h-10 shrink-0 flex items-center justify-center font-ods font-bold text-lg text-white rounded shadow-sm" style={{ backgroundColor: ods.color }}>{ods.id}</div>
                                                        <span className="text-[10px] font-bold uppercase leading-tight">{ods.nombre}</span>
                                                    </div>
                                                    <p className="text-[9px] opacity-80 leading-relaxed font-medium italic">"{ods.meta}"</p>
                                                    <p className="text-[8px] text-right mt-1 opacity-50 font-bold uppercase tracking-wider">— {ods.cita}</p>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </aside>
                    </div>
                    <div>
                         <h2 className="text-xl font-bold text-[#003057] mb-6 border-l-4 border-[#D4AF37] pl-4 uppercase tracking-tight flex items-center">
                            <FileText className="w-6 h-6 mr-2 text-[#003057]"/> Secuencia Didáctica
                         </h2>
                         <div className="space-y-4">
                            {data.fases.map((fase, idx) => (
                                <div key={idx} className="bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden group">
                                    <button 
                                        onClick={() => setActiveFase(activeFase === idx ? null : idx)}
                                        className={`w-full p-6 flex justify-between items-center text-left transition-colors ${activeFase === idx ? 'bg-blue-50/30' : 'hover:bg-gray-50'}`}
                                    >
                                        <div>
                                            <h3 className="font-bold text-[#003057] text-base uppercase flex items-center">
                                                <div className={`w-8 h-8 rounded-full bg-${data.color}-100 text-${data.color}-600 flex items-center justify-center mr-3 text-xs font-black shadow-sm`}>{idx + 1}</div>
                                                {fase.titulo}
                                            </h3>
                                        </div>
                                        <ChevronDown className={`w-5 h-5 text-gray-400 transition-transform duration-300 ${activeFase === idx ? 'rotate-180' : ''}`}/>
                                    </button>
                                    
                                    {activeFase === idx && (
                                        <div className="p-8 bg-white border-t border-gray-100 space-y-8 animate-in slide-in-from-top-2 duration-300">
                                            {fase.sesiones.map(s => (
                                                <div key={s.num} className="relative pl-8 border-l-2 border-gray-100 ml-4 group-hover:border-blue-100 transition-colors">
                                                    <div className="absolute -left-[9px] top-0 w-4 h-4 rounded-full bg-white border-2 border-blue-400 shadow-sm"></div>
                                                    <div className="mb-4">
                                                        <span className="inline-block bg-[#003057] text-white text-[10px] font-black px-2 py-0.5 rounded uppercase tracking-wider mb-1">Sesión {s.num}</span>
                                                        <h4 className="font-bold text-gray-800 text-sm uppercase">{s.obj}</h4>
                                                    </div>
                                                    <div className="bg-slate-50 p-5 rounded-xl text-sm text-gray-600 border border-slate-100 shadow-sm">
                                                        <ul className="space-y-3">
                                                            {s.actividades.map((act, i) => (
                                                                <li key={i} className="flex items-start leading-relaxed">
                                                                    <span className="mr-3 text-blue-500 mt-1.5 w-1.5 h-1.5 bg-blue-500 rounded-full shrink-0"></span>
                                                                    <span>{act}</span>
                                                                </li>
                                                            ))}
                                                        </ul>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            )
        };
        
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
